<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>لوحة المدير - نظام الدور</title>
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body>
  <div class="container">
    <div class="top">
      <h1>لوحة المدير</h1>
      <p>إعدادات + رقم المدير + إدارة الموظفين + شعار وصورة + الملاحظة</p>
    </div>

    <div class="subbar">
      <div class="pill">الحالة: <b id="conn">غير متصل…</b></div>
      <div class="pill"><a href="./index.html">الصفحة الرئيسية</a></div>
    </div>

    <div class="cardRow">
      <div class="card">
        <div class="hd">الغرفة (Room)</div>
        <div class="bd">
          <label>Room</label>
          <input id="roomValue" placeholder="sohar-demo"/>
          <div class="btns"><button class="gray" id="setRoom">تغيير الغرفة</button></div>
          <small class="help">انسخ نفس Room إلى الموظف وشاشة العرض.</small>
        </div>
      </div>

      <div class="card">
        <div class="hd">الحماية (PIN)</div>
        <div class="bd">
          <div class="pill" id="msg">جاهز</div>
          <label style="margin-top:10px">رقم المدير (Admin PIN)</label>
          <input id="adminPin" type="password" placeholder="اكتب رقم تختاره (مثال 1234)"/>
          <div class="btns">
            <button class="primary" id="saveAdminPin">حفظ رقم المدير</button>
            <button class="danger" id="resetAdminPin">إعادة تعيين رقم المدير</button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="hd">إعدادات النظام</div>
        <div class="bd">
          <label>اسم الجهة</label>
          <input id="instituteName" placeholder="معهد السلامة المرورية - صحار"/>
          <label style="margin-top:10px">عدد الأرقام المحفوظة في السجل</label>
          <input id="historyLimit" type="number" min="3" max="60" value="15"/>
          <label style="margin-top:10px">النص السفلي</label>
          <input id="tickerText" placeholder="يرجى الالتزام بالهدوء وانتظار دوركم..."/>
          <div class="btns"><button class="primary" id="saveSettings">حفظ الإعدادات</button></div>
        </div>
      </div>
    </div>

    <div class="cardRow" style="margin-top:14px">
      <div class="card">
        <div class="hd">الملاحظة (صلاحية المدير فقط)</div>
        <div class="bd">
          <label>نص الملاحظة</label>
          <textarea id="adminNote" placeholder="مثال: يرجى التوجه لغرفة التجهيز"></textarea>
          <div class="btns">
            <button class="primary" id="saveAdminNote">حفظ الملاحظة</button>
            <button class="warn" id="clearHistory">مسح سجل الأرقام</button>
            <button class="danger" id="resetAll">تصفير النظام بالكامل</button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="hd">الشعار (يظهر أعلى شاشة العرض)</div>
        <div class="bd">
          <label>رفع شعار (PNG/JPG)</label>
          <input id="logoFile" type="file" accept="image/*"/>
          <small class="help">يفضل حجم خفيف.</small>
          <div class="centerImage" id="logoHolder"></div>
        </div>
      </div>

      <div class="card">
        <div class="hd">إدارة الموظفين (إضافة/حذف/تغيير اسم المستخدم)</div>
        <div class="bd">
          <label>اسم المستخدم الجديد</label>
          <input id="newUsername" placeholder="مثال: يوسف"/>
          <label style="margin-top:10px">رقم الموظف</label>
          <input id="newUserPin" type="password" placeholder="مثال: 4321"/>
          <div class="btns"><button class="primary" id="addStaff">إضافة موظف</button></div>
          <small class="help">يمكنك حذف أو تغيير الاسم من القائمة بالأسفل.</small>
          <div style="margin-top:12px" id="staffList"></div>
        </div>
      </div>
    </div>

    <div class="cardRow" style="margin-top:14px">
      <div class="card" style="grid-column:1/-1">
        <div class="hd">الصورة في العمود الأوسط (تظهر في شاشة العرض)</div>
        <div class="bd">
          <div class="pill" id="imgName"></div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:14px;align-items:start">
            <div>
              <label>اختر صورة (PNG/JPG)</label>
              <input id="imgFile" type="file" accept="image/*"/>
              <small class="help">يفضّل صورة خفيفة.</small>
              <div class="btns">
                <button class="danger" id="clearImage">حذف الصورة</button>
              </div>
            </div>
            <div class="centerImage" id="imgHolder"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="rights">جميع الحقوق محفوظة — الرقيب أول يحيى آل عبدالسلام</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
  <script src="./app.js"></script>
  <script>window.TQ.initAdmin();</script>
</body>
</html>